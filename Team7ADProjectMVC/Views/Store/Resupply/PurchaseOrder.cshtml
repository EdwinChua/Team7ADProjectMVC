@model Team7ADProjectMVC.PurchaseOrder

@{
    ViewBag.Title = "Details";
    Layout = "~/_Layout1.cshtml";
    Page.Title = "Purchase Order Details";
    Employee currentEmployee = (Employee)Session["User"];
    Page.Employee = currentEmployee;
}


<div>
    <div class="row">
        <div class="col-md-2">
            Order Date:
        </div>
        <div class="col-md-2">
            @Model.OrderDate.Value.ToString("dd MMM yyyy")
        </div>
    </div>
    <div class="row">
        <div class="col-md-2">
            Supplier:
        </div>
        <div class="col-md-3">
            @Model.Supplier.SupplierName (@Model.Supplier.SupplierCode)
        </div>
    </div>
    <div class="row">
        <div class="col-md-2">
            Order Status:
        </div>
        <div class="col-md-2">
            @Html.DisplayFor(model => model.OrderStatus)
        </div>
    </div>
    <div class="row">
        <div class="col-md-2">
            Approved By:
        </div>
        <div class="col-md-2">
            @Html.DisplayFor(model => model.AuthorizedBy)
        </div>
    </div>
    <div class="row">
        <div class="col-md-2">
            Approved On:
        </div>
        <div class="col-md-2">
            @Model.AuthorizedDate.Value.ToString("dd MMM yyyy")
        </div>
    </div>
    <div class="row">
        <div class="col-md-2">
            Generated by:
        </div>
        <div class="col-md-2">
            @Html.DisplayFor(model => model.Employee.EmployeeName)
        </div>
    </div>

</div>
<table class="table">
    <thead>
        <tr>
            <th>
                Item
            </th>
            <th>
                Quantity
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.PurchaseDetails)
        {
            <tr>
                <td>
                    @item.Inventory.Description (@item.Inventory.ItemNo)
                </td>
                <td>
                    @item.Quantity
                </td>
            </tr>
        }
    </tbody>
</table>
@if (Model.OrderStatus == "Pending" && (currentEmployee.Role.Name == "Store Supervisor" || currentEmployee.Role.Name == "Store Manager"))
{<form action="../ApprovePO">
        <input type="hidden" name="poNumber" value="@Model.PurchaseOrderId" />
        <input type="submit" name="approve" value="Approve" title="Approve" class="btn btn-primary" />
        <input type="submit" name="approve" value="Reject" class="btn btn-danger" />
     <input type="button" value="Back" class="btn btn-default" onclick="window.history.back()" />
    </form>
}
else {
<input type="button" value="Back" class="btn btn-default" onclick="window.history.back()" />
}